name: Test1

on:
  workflow_dispatch

jobs:
  dyff:
    name: yaml diff
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v3
      - name: Install tools
        run: |
          sudo snap install dyff
          dyff version
      - name: Download yaml
        run: |
          YML="https://ica.illumina.com/ica/api/swagger/openapi_public.yaml"
          TMP_YML="openapi_tmp.yaml"
          curl -o ${TMP_YML} ${YML}
          dyff between --omit-header --set-exit-code ${TMP_YML} openapi_current.yaml
          echo $?
